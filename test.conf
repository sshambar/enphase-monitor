# required config
USERNAME="some-username"
PASSWORD="some-password"
SERIAL="2024XXXXXXXX"
PORT_FILE=test.dev

# === "TEST" mode ===
TEST=1
DEBUG=1
# simpler cmdline
UPS=test

# dir for token/portfile
STATE_DIR=.
# override token file
#TOKEN_FILE=alt.token

# short timeouts
POLLFREQ=6
POLLFREQALERT=5

# to disable meter query
#DISABLE_METERS=1

TEST_SESS='{"message":"success","session_id":"d6bc8491c983880d1b55a5a5d7f91926"}'

TEST_TOKEN='eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJFbnRyZXoiLCJpYXQiOjE3Mzk4MjI4MDIsImV4cCI6MzE5MTQyOTIwMiwiYXVkIjoiMjAyNFhYWFhYWFhYIiwic3ViIjoic29tZS11c2VyIiwidXNlcm5hbWUiOiJzb21lLXVzZXJuYW1lIiwianRpIjoiMDAxMTIyMzMtNDQ1NS02Njc3LTg4OTktYWFiYmNjZGRlZWZmIn0.Pw9Pjd9woQNNlOyyoJBW3--DNZ53CdViDIhpVe30a2c'

TEST_RELAY='{"mains_admin_state":"closed","mains_oper_state":"@RELAY_STATE@","srt12_state":"open","srt13_state":"open","der1_state":1,"der2_state":1,"der3_state":0,"Enchg_grid_mode":"multimode-ongrid","Solar_grid_mode":"multimode-ongrid"}'

TEST_REPORTS='[{"createdAt":1739641810,"reportType":"net-consumption","cumulative":{"currW":-1405.143,"actPower":-1405.143,"apprntPwr":-1546.095,"reactPwr":-77.803,"whDlvdCum":6048886.510,"whRcvdCum":0.000,"varhLagCum":986353.879,"varhLeadCum":5752592.002,"vahCum":16712633.768,"rmsVoltage":243.273,"rmsCurrent":-12.711,"pwrFactor":-1.00,"freqHz":60.00},"lines":[{"currW":-803.590,"actPower":-803.590,"apprntPwr":-871.685,"reactPwr":134.970,"whDlvdCum":2003386.671,"whRcvdCum":0.000,"varhLagCum":486872.119,"varhLeadCum":2046889.310,"vahCum":7328513.787,"rmsVoltage":121.634,"rmsCurrent":-7.166,"pwrFactor":-1.00,"freqHz":60.00},{"currW":-601.553,"actPower":-601.553,"apprntPwr":-674.410,"reactPwr":-212.772,"whDlvdCum":4045499.839,"whRcvdCum":0.000,"varhLagCum":499481.761,"varhLeadCum":3705702.692,"vahCum":9384119.982,"rmsVoltage":121.639,"rmsCurrent":-5.544,"pwrFactor":-1.00,"freqHz":60.00}]},{"createdAt":1739641810,"reportType":"total-consumption","cumulative":{"currW":2210.620,"actPower":2210.620,"apprntPwr":2098.313,"reactPwr":-382.032,"whDlvdCum":15025921.548,"whRcvdCum":0.000,"varhLagCum":-1409402.790,"varhLeadCum":4914206.805,"vahCum":16712633.768,"rmsVoltage":243.273,"rmsCurrent":17.251,"pwrFactor":1.00,"freqHz":60.00},"lines":[{"currW":1004.019,"actPower":1004.019,"apprntPwr":950.015,"reactPwr":-16.929,"whDlvdCum":6491259.267,"whRcvdCum":0.000,"varhLagCum":-711789.328,"varhLeadCum":1629034.919,"vahCum":7328513.787,"rmsVoltage":121.634,"rmsCurrent":7.810,"pwrFactor":1.00,"freqHz":60.00},{"currW":1206.601,"actPower":1206.601,"apprntPwr":1148.298,"reactPwr":-365.102,"whDlvdCum":8534662.282,"whRcvdCum":0.000,"varhLagCum":-697613.462,"varhLeadCum":3285171.886,"vahCum":9384119.982,"rmsVoltage":121.639,"rmsCurrent":9.440,"pwrFactor":1.00,"freqHz":60.00}]},{"createdAt":1739641810,"reportType":"storage","cumulative":{"currW":-2.443,"actPower":-2.443,"apprntPwr":765.721,"reactPwr":122.446,"whDlvdCum":250597.309,"whRcvdCum":499657.315,"varhLagCum":3170591.105,"varhLeadCum":16632.211,"vahCum":4678888.602,"rmsVoltage":243.301,"rmsCurrent":6.438,"pwrFactor":0.02,"freqHz":60.00},"lines":[{"currW":12.037,"actPower":12.037,"apprntPwr":374.042,"reactPwr":61.246,"whDlvdCum":125305.689,"whRcvdCum":249873.237,"varhLagCum":1586066.027,"varhLeadCum":8320.258,"vahCum":2340584.074,"rmsVoltage":121.650,"rmsCurrent":3.219,"pwrFactor":-0.04,"freqHz":60.00},{"currW":-14.480,"actPower":-14.480,"apprntPwr":391.678,"reactPwr":61.201,"whDlvdCum":125291.621,"whRcvdCum":249784.078,"varhLagCum":1584525.078,"varhLeadCum":8311.953,"vahCum":2338304.528,"rmsVoltage":121.650,"rmsCurrent":3.219,"pwrFactor":-0.04,"freqHz":60.00}]}]'

TEST_LIVE='{"meters":{"last_update":1739391123,"soc":@BATT_SOC@,"main_relay_state":1,"gen_relay_state":5,"backup_bat_mode":0,"backup_soc":100,"is_split_phase":1,"phase_count":2,"enc_agg_soc":100,"enc_agg_energy":10000,"acb_agg_soc":0,"acb_agg_energy":0,"pv":{"agg_p_mw":0,"agg_s_mva":611007,"agg_p_ph_a_mw":0,"agg_p_ph_b_mw":0,"agg_p_ph_c_mw":0,"agg_s_ph_a_mva":305242,"agg_s_ph_b_mva":305764,"agg_s_ph_c_mva":0},"storage":{"agg_p_mw":-32636,"agg_s_mva":-1635917,"agg_p_ph_a_mw":-16326,"agg_p_ph_b_mw":-16311,"agg_p_ph_c_mw":0,"agg_s_ph_a_mva":-817530,"agg_s_ph_b_mva":-818387,"agg_s_ph_c_mva":0},"grid":{"agg_p_mw":2158158,"agg_s_mva":2511412,"agg_p_ph_a_mw":781160,"agg_p_ph_b_mw":1376998,"agg_p_ph_c_mw":0,"agg_s_ph_a_mva":915842,"agg_s_ph_b_mva":1595569,"agg_s_ph_c_mva":0},"load":{"agg_p_mw":2125522,"agg_s_mva":1486502,"agg_p_ph_a_mw":764834,"agg_p_ph_b_mw":1360687,"agg_p_ph_c_mw":0,"agg_s_ph_a_mva":403554,"agg_s_ph_b_mva":1082946,"agg_s_ph_c_mva":0},"generator":{"agg_p_mw":0,"agg_s_mva":0,"agg_p_ph_a_mw":0,"agg_p_ph_b_mw":0,"agg_p_ph_c_mw":0,"agg_s_ph_a_mva":0,"agg_s_ph_b_mva":0,"agg_s_ph_c_mva":0}}}'

TEST_SECCTRL='{"shutdown":false,"agg_soc":100,"Max_energy":10000,"VLS_Limit":10,"soc_recovery_entry":0,"soc_recovery_exit":10,"ESS_in_progress":false}'

TEST_INFO="<?xml version='1.0' encoding='UTF-8'?>
<envoy_info>
  <time>1739647898</time>
  <device>
    <sn>2024XXXXXXXX</sn>
    <software>D8.2.4378</software>
  </device>
</envoy_info>
"
